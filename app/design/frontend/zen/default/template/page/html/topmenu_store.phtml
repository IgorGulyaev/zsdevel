<div class="navbar-nav-container">
    <div class="container">
        <nav id="navbar" class="navbar">
            <ul class="nav navbar-nav">
                <?php
                foreach (Mage::app()->getWebsites() as $website) {
                    foreach ($website->getGroups() as $group) {
                        $stores = $group->getStores();
                        foreach ($stores as $store) {
                            if ($store == 1) {} else {
                                echo '<li><a href="'.$store['code'].'">'.$store->getName().'</a></li>';
                                echo '<ul>';
                                $rootId = $store->getRootCategoryId();
                                $collection = Mage::getModel('catalog/category')
                                    ->getResourceCollection()
                                    ->addAttributeToSelect('*')
                                    ->addFieldToFilter('path', array('like' => "1/{$rootId}/%"))
                                    ->addIsActiveFilter();
                                foreach ($collection as $cat) {
                                    echo '<li><a href="'.$cat->getUrl().'">'.$cat->getName().'</a></li>';
                                }
                                echo '</ul>';
                            }
                        }
                    }
                }
                ?>
            </ul>
        </nav>
    </div>
</div>